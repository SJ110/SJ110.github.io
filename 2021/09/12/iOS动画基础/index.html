<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

<style>
    .pace .pace-progress {
        background: #1E92FB; /*��������ɫ*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*��Ӱ��ɫ*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*�ϱ߿���ɫ*/
        border-left-color: #1E92FB;    /*��߿���ɫ*/
    }
</style>
  <meta name="description" content="前言&amp;ensp;&amp;ensp;这边博客主要是总结一下最近看到ios动画开发的一些基础知识。主要包含如下一些知识点。主要参考自《iOS开发实战：从入门到上架APPsotre》 1234567891011121、使用UIImageView播放图片组动画2、使用block回调创建UIView层过渡动画3、使用block回调创建UIView层转场动画4、使用commit方式创建UIView层过渡动画5、使用">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS动画基础">
<meta property="og:url" content="http://yoursite.com/2021/09/12/iOS动画基础/index.html">
<meta property="og:site_name" content="xiaopingpp">
<meta property="og:description" content="前言&amp;ensp;&amp;ensp;这边博客主要是总结一下最近看到ios动画开发的一些基础知识。主要包含如下一些知识点。主要参考自《iOS开发实战：从入门到上架APPsotre》 1234567891011121、使用UIImageView播放图片组动画2、使用block回调创建UIView层过渡动画3、使用block回调创建UIView层转场动画4、使用commit方式创建UIView层过渡动画5、使用">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/2021/09/12/iOS动画基础/coreAnimation.png">
<meta property="og:image" content="http://yoursite.com/2021/09/12/iOS动画基础/CAAnimation.png">
<meta property="og:image" content="http://yoursite.com/2021/09/12/iOS动画基础/CATransform3D.png">
<meta property="og:image" content="http://yoursite.com/2021/09/12/iOS动画基础/fire.png">
<meta property="og:image" content="http://yoursite.com/2021/09/12/iOS动画基础/flappybird1.png">
<meta property="og:image" content="http://yoursite.com/2021/09/12/iOS动画基础/flappybird2.png">
<meta property="og:updated_time" content="2021-10-05T04:16:54.497Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS动画基础">
<meta name="twitter:description" content="前言&amp;ensp;&amp;ensp;这边博客主要是总结一下最近看到ios动画开发的一些基础知识。主要包含如下一些知识点。主要参考自《iOS开发实战：从入门到上架APPsotre》 1234567891011121、使用UIImageView播放图片组动画2、使用block回调创建UIView层过渡动画3、使用block回调创建UIView层转场动画4、使用commit方式创建UIView层过渡动画5、使用">
<meta name="twitter:image" content="http://yoursite.com/2021/09/12/iOS动画基础/coreAnimation.png">



  <link rel="alternate" href="/atom.xml" title="xiaopingpp" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://yoursite.com/2021/09/12/iOS动画基础/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>iOS动画基础 | xiaopingpp</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiaopingpp</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/09/12/iOS动画基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Xiaopingpp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiaopingpp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">iOS动画基础

              
            
          </h1>
        

        <div class="post-meta">

          
            <i class="fa fa-thumb-tack"></i>
            <font color="7D26CD">top</font>
            <span class="post-meta-divider">|</span>
          

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2021-09-12 15:09:54" itemprop="dateCreated datePublished" datetime="2021-09-12T15:09:54+08:00">2021-09-12</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2021-10-05 12:16:54" itemprop="dateModified" datetime="2021-10-05T12:16:54+08:00">2021-10-05</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">19k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">17 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">
      
      

      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>&ensp;&ensp;这边博客主要是总结一下最近看到ios动画开发的一些基础知识。主要包含如下一些知识点。主要参考自<a href="https://weread.qq.com/web/reader/56932a20719b1fcb569e111kf4532c00231f457c545ad3c" target="_blank" rel="noopener">《iOS开发实战：从入门到上架APPsotre》</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1、使用UIImageView播放图片组动画</span><br><span class="line">2、使用block回调创建UIView层过渡动画</span><br><span class="line">3、使用block回调创建UIView层转场动画</span><br><span class="line">4、使用commit方式创建UIView层过渡动画</span><br><span class="line">5、使用commit方式创建UIView层转场动画</span><br><span class="line">6、CAlayer层在UI开发中的应用</span><br><span class="line">7、各种CALayer子类的用法</span><br><span class="line">8、coreAnimation核心动画框架的用法</span><br><span class="line">9、视图的transform变换</span><br><span class="line">10、粒子效果动画</span><br><span class="line">11、ios中播放GIF动态图的方法</span><br><span class="line">12、Flappy Bird动画小游戏</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h4 id="使用UIImageView播放图片组动画"><a href="#使用UIImageView播放图片组动画" class="headerlink" title="使用UIImageView播放图片组动画"></a>使用UIImageView播放图片组动画</h4><p>&ensp;&ensp;使用UIImageview的<strong><em>animationImages</em></strong>属性将需要播放的图片加载进去，设置播放时长，和重复次数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(30, 100, 170, 460)];</span><br><span class="line">    NSMutableArray *imageArray = @[].mutableCopy;</span><br><span class="line">    for(int i = 1; i &lt;= 4;i++) &#123;</span><br><span class="line">        UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@&quot;VC1Image%d&quot;,i]];</span><br><span class="line">        [imageArray addObject:image];</span><br><span class="line">    &#125;</span><br><span class="line">    [self.view addSubview:imageView];</span><br><span class="line">    imageView.animationImages = imageArray;</span><br><span class="line">    imageView.animationDuration = 0.4;</span><br><span class="line">    imageView.animationRepeatCount = 0; ///无限循环</span><br><span class="line">    [imageView startAnimating];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码运行后就会出现四张图无限轮播的动画效果。</p>
<h4 id="UIView层动画的应用"><a href="#UIView层动画的应用" class="headerlink" title="UIView层动画的应用"></a>UIView层动画的应用</h4><p>&ensp;&ensp;一般的开发中，对于UIView层的动画是使用非常广泛的。ios提供在UIView层上进行动画操作的类方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/// NSTimeInterval:动画持续时间</span><br><span class="line">///^(void)animations 需要执行的动画内容</span><br><span class="line">[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; animations:&lt;#^(void)animations#&gt;]</span><br><span class="line"></span><br><span class="line">///NSTimeInterval:同上</span><br><span class="line">///^(void)animations :同上</span><br><span class="line">/// ^(BOOL finished)completion 动画完成需要执行的动作</span><br><span class="line"> [UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;]</span><br><span class="line"></span><br><span class="line">/// UIViewAnimationOptions 动画执行的配置参数 枚举类型，比如淡入淡出效果等</span><br><span class="line">/// 动画配置参数的取值可以参考源码中的枚举定义</span><br><span class="line">/// delay 动画延迟执行时间</span><br><span class="line">[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; options:&lt;#(UIViewAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;]</span><br><span class="line"></span><br><span class="line">// usingSpringWithDamping 取值0-1，设置阻尼度</span><br><span class="line">// initialSpringVelocity 阻尼初速度</span><br><span class="line">[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; usingSpringWithDamping:&lt;#(CGFloat)#&gt; initialSpringVelocity:&lt;#(CGFloat)#&gt; options:&lt;#(UIViewAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 40, 40)];</span><br><span class="line">    view.backgroundColor = [UIColor blueColor];</span><br><span class="line">    [self.view addSubview:view];</span><br><span class="line">    NSTimeInterval times = 3;</span><br><span class="line">    [UIView animateWithDuration:times animations:^&#123;</span><br><span class="line">        view.frame = CGRectMake(200, 200, 80, 80);</span><br><span class="line">        view.backgroundColor = [UIColor redColor];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;运行代码可以看到图从蓝色变为红色 位置偏移，大小变化，持续时间3秒,其他几种动画效果参考demo</p>
<h5 id="UIView层过渡动画支持的属性"><a href="#UIView层过渡动画支持的属性" class="headerlink" title="UIView层过渡动画支持的属性"></a>UIView层过渡动画支持的属性</h5><p>&ensp;&ensp;动画的执行还可以进行嵌套，可以将动画分成几个部分，执行完某一部分后在其回调中执行下一部分，下面列出一些动画过渡中可以支持的属性</p>
<pre><code>1、frame:给视图的位置和尺寸实现过渡的动画效果。
2、bounds:给视图内部的坐标原点改变和尺寸变化增加过渡效果
3、center:为视图的
4、transform:给视图的几何变换增加过渡动画
5、alpha:给视图透明度增加过渡动画
6、backgroundColor:给视图背景色增加动画
7、contentStrech给UIImageview改变图片拉伸方式增加动画</code></pre><p>&ensp;&ensp;<strong><em>bounds和frame.使用cgRect设置时，后两个参数决定大小，前两个参数中，frame决定当前视图在父视图中的位置，bounds决定子视图在自身中的坐标原点的位置</em></strong></p>
<h4 id="使用commit方式进行UIView动画创建"><a href="#使用commit方式进行UIView动画创建" class="headerlink" title="使用commit方式进行UIView动画创建"></a>使用commit方式进行UIView动画创建</h4><p>&ensp;&ensp;在iOS4之前使用传统的commit的方式创建UIView层的动画。这种方式包含四个步骤，1设置动画开始标志，2、设置动画属性，3、设置动画过渡效果，4、提交动画。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    UIView *view = [UIView new];</span><br><span class="line">    view.frame = CGRectMake(100, 100, 80, 80);</span><br><span class="line">    view.backgroundColor = [UIColor redColor];</span><br><span class="line">    [self.view addSubview:view];</span><br><span class="line">    /// 动画开始标志</span><br><span class="line">    [UIView beginAnimations:@&quot;test&quot; context:nil];</span><br><span class="line">    [UIView setAnimationDelegate:self];</span><br><span class="line">    /// 动画属性</span><br><span class="line">    [UIView setAnimationWillStartSelector:@selector(start)];</span><br><span class="line">    [UIView setAnimationDidStopSelector:@selector(stop)];</span><br><span class="line">    [UIView setAnimationDuration:3];</span><br><span class="line">    [UIView setAnimationDelay:1];</span><br><span class="line">    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];</span><br><span class="line">    [UIView setAnimationRepeatAutoreverses:YES];</span><br><span class="line">    [UIView setAnimationRepeatCount:3];</span><br><span class="line">    /// 动画过渡效果</span><br><span class="line">    view.backgroundColor = [UIColor blueColor];</span><br><span class="line">    view.frame = CGRectMake(200, 200, 80, 80);</span><br><span class="line">    /// 提交动画</span><br><span class="line">    [UIView commitAnimations];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;对比上下两种动画，commit的方式更为传统，需要编写的代码也更多，因为是在ios4之前，ios4之后引入UIView的类方法的动画到现在应该是所有版本都适配的，现在基本没有ios4以下的设备。而且commit创建动画的方式已经在ios13以后被废弃了。所以还是尽量使用UIView类方法创建动画的方式更好。</p>
<h4 id="UIView转场动画"><a href="#UIView转场动画" class="headerlink" title="UIView转场动画"></a>UIView转场动画</h4><p>&ensp;&ensp; 相对于过渡动画，转场动画更多用于两个UIView视图的切换或者重绘某个视图。iOS中，UIView的转场动画有两种，一种时对UIView视图内容进行重新绘制，一种是使用新的视图替换旧视图的转场。<br>&ensp;&ensp; 在实际开发中开发者会遇到这样的需求：一个UIView视图中有许多子视图，当用户数据变化时，子视图控件需要重新布局，使得原本视图看来变成新的视图。因为视图的重绘是在瞬间完成的，如果不添加任何转场效果，就会出现闪动，体验效果很差。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    view = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 80, 80)];</span><br><span class="line">    view.backgroundColor = [UIColor redColor];</span><br><span class="line">    view2 = [[UIView alloc]initWithFrame:CGRectMake(200, 200, 80, 80)];</span><br><span class="line">    view2.backgroundColor = [UIColor blueColor];</span><br><span class="line">    [self.view addSubview:view];</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    /// 视图自身变化进行转场</span><br><span class="line">    [UIView transitionWithView:view duration:3 options:UIViewAnimationOptionTransitionFlipFromBottom | UIViewAnimationOptionAllowAnimatedContent animations:^&#123;</span><br><span class="line">        self-&gt;view.backgroundColor = [UIColor blueColor];</span><br><span class="line">        self-&gt;view.frame = CGRectMake(200, 200, 80, 80);</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;];</span><br><span class="line">    /// 切换视图转场</span><br><span class="line">//    [UIView transitionFromView:view toView:view2 duration:3 options:UIViewAnimationOptionTransitionFlipFromBottom |UIViewAnimationOptionAllowAnimatedContent  completion:^(BOOL finished) &#123;</span><br><span class="line">//</span><br><span class="line">//    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;切换视图的转场用于开发中整体视图的切换需求，这个操作会将原本的UIView从原本的父视图上移除，再将新的UIView视图添加到父视图上。其中option的定义是一个枚举，其中定义了许多转场的效果，可以进入源码查看其定义。</p>
<h4 id="coreAnimation动画编程技术"><a href="#coreAnimation动画编程技术" class="headerlink" title="coreAnimation动画编程技术"></a>coreAnimation动画编程技术</h4><p>&ensp;&ensp;使用UIView层的过渡动画和转场动画可以满足绝大部分开发需求，但是也有许多局限性，使用CoreAnimation则可以更加自由的进行iOS动画编程。CoreAnimation是基于OpenGL和CoreGraphics图像处理框架的跨平台动画框架，下图给出了CoreAnimtion的系统结构图</p>
<p><img src="/2021/09/12/iOS动画基础/coreAnimation.png" alt="coreAnimation"></p>
<p>&ensp;&ensp;CoreAnimation框架中大多数动画效果都是基于CALayer类实现的。每一个UIView都包含一个CALayer属性。边框，阴影等操作都是和CALayer相关的。</p>
<p>&ensp;&ensp;<strong>锚点</strong>，所有的CALayer对象都有一个anchorPoint属性，这是CALayer对象的锚点，可以理解为对象动作的参照点，其中x,y都取值在0～1中，CALayer对象锚点值默认为(0,0)是视图的左上角，如果要设置为视图中心，则将锚点设置为(0.5,0.5),当CALayer层执行操作时都是以锚点为草考点进行的。比如一些平移，旋转等。抛开Layer层，view层主要是处理事件接受和用户交互的功能。</p>
<h5 id="色彩梯度层–CAGradientLayer"><a href="#色彩梯度层–CAGradientLayer" class="headerlink" title="色彩梯度层–CAGradientLayer"></a>色彩梯度层–CAGradientLayer</h5><p>&ensp;&ensp;CAGradientLayer 是继承自CALayer的子类，是专门用来处理颜色梯度渐变的layer层</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    CAGradientLayer *layer = [CAGradientLayer layer];</span><br><span class="line">    layer.colors = @[(id)[UIColor redColor].CGColor,(id)[UIColor blueColor].CGColor];</span><br><span class="line">    layer.bounds = CGRectMake(100, 100, 100, 100);</span><br><span class="line">    layer.position = CGPointMake(200, 200);</span><br><span class="line">    layer.locations = @[@0.1];</span><br><span class="line">    layer.startPoint = CGPointMake(0, 0);</span><br><span class="line">    layer.endPoint = CGPointMake(1, 1);</span><br><span class="line">    [self.view.layer addSublayer:layer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;上面代码中colors用于设置颜色梯度，bounds是设置CAlayer类的基础属性，用来设置layer层尺寸，position属性设置layer的位置，locations属性设置颜色梯度分界线，取值为0-1，startPoint，endPoint设置渲染的起始位置，此处为左上角到右下角，locations会渲染0.2部分红色，在渲染0.8部分的蓝色。</p>
<h5 id="视图拷贝层–CARelicatorLayer"><a href="#视图拷贝层–CARelicatorLayer" class="headerlink" title="视图拷贝层–CARelicatorLayer"></a>视图拷贝层–CARelicatorLayer</h5><p>&ensp;&ensp;CARelicatorLayer可以理解为layer层的一个复制容器，起作用是复制一个已经存在的layer层对象进行复制渲染.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">///CARelicatorLayer</span><br><span class="line">CALayer *baseLayer = [CALayer layer];</span><br><span class="line">baseLayer.bounds = CGRectMake(0, 0, 100, 100);</span><br><span class="line">baseLayer.position = CGPointMake(100, 400);</span><br><span class="line">baseLayer.backgroundColor = [UIColor redColor].CGColor;</span><br><span class="line">CAReplicatorLayer *reLayer = [CAReplicatorLayer layer];</span><br><span class="line">reLayer.instanceRedOffset = -0.2;</span><br><span class="line">reLayer.position = CGPointMake(0, 0);</span><br><span class="line">reLayer.instanceTransform = CATransform3DMakeTranslation(100, 0, 0);</span><br><span class="line">reLayer.instanceCount = 3;</span><br><span class="line">[reLayer addSublayer:baseLayer];</span><br><span class="line">[self.view.layer addSublayer:reLayer];</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;此处layer先创建一个layer层作为要复制的原本，作为子layer加到CARelicatorLayer对象中，CARelicatorLayer的instanceRedOffset设置每个复制副本背景色中红色的偏移量，对应还有蓝色，绿色和alpha的偏移量。instanceTransform属性用于设置复制视图的3D变化属性，上面的代码表示将每个复制的layer层沿着x轴正方向偏移100个单位。</p>
<h5 id="徒刑渲染层–CAShapeLayer"><a href="#徒刑渲染层–CAShapeLayer" class="headerlink" title="徒刑渲染层–CAShapeLayer"></a>徒刑渲染层–CAShapeLayer</h5><p>&ensp;&ensp;CAShapeLayer是用于绘制图形的layer层，可以用来绘制一些自定义的图形。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/// CAShapeLayer</span><br><span class="line">CAShapeLayer *shapeLayer = [CAShapeLayer layer];</span><br><span class="line">shapeLayer.position = CGPointMake(0, 0);</span><br><span class="line">CGMutablePathRef path = CGPathCreateMutable();</span><br><span class="line">CGPathMoveToPoint(path, 0, 300, 600);</span><br><span class="line">CGPathAddLineToPoint(path, 0, 200, 500);</span><br><span class="line">CGPathAddLineToPoint(path, 0, 100, 600);</span><br><span class="line">shapeLayer.path = path;</span><br><span class="line">[self.view.layer addSublayer:shapeLayer];</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;上面的代码中CGMutablePathRef创建了ios中的绘图路径对象，CGPathCreateMutable()方法创建了可变的绘图路径对象，CGPathMoveToPoint()方法设置绘图路径起点，CGPathAddLineToPoint()为绘图路径增加一条线。fillColor可以设置图像的填充色。还可以设置线条颜色，线条宽度等内容。</p>
<h5 id="文本绘制层–CATextLayer"><a href="#文本绘制层–CATextLayer" class="headerlink" title="文本绘制层–CATextLayer"></a>文本绘制层–CATextLayer</h5><p>&ensp;&ensp;CAtextLayer 用于进行视图上下文本的绘制，UILable控件就是基于CATextLayer实现的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/// CATextLayer</span><br><span class="line">CATextLayer *textLayer = [CATextLayer layer];</span><br><span class="line">textLayer.bounds = CGRectMake(0, 0, 320, 100);</span><br><span class="line">textLayer.position = CGPointMake(300, 700);</span><br><span class="line">textLayer.string = @&quot;这是一段文字&quot;;</span><br><span class="line">textLayer.fontSize = 25;</span><br><span class="line">textLayer.foregroundColor = [UIColor redColor].CGColor;</span><br><span class="line">textLayer.alignmentMode = kCAAlignmentLeft;</span><br><span class="line">[self.view.layer addSublayer:textLayer];</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;上面代码中设置了一段在layer上显示的文字。</p>
<h4 id="CAAnimation动画体系介绍"><a href="#CAAnimation动画体系介绍" class="headerlink" title="CAAnimation动画体系介绍"></a>CAAnimation动画体系介绍</h4><p>&ensp;&ensp;通过前面的介绍，开发者可以通过CALayer设置许多视图UI上的属性，CAAnimation框架作用就是将这些属性的变化都以动画的形式展示出来，由于CALayer相对UIView可以更加灵活的设置更多属性，因此CALayer层的动画操作更自由。下图中是CAAnimation及其子类的继承关系结构图:</p>
<p><img src="/2021/09/12/iOS动画基础/CAAnimation.png" alt="CAAnimation继承图"></p>
<p>&ensp;&ensp;CAAnimation分出的三个字累CAPropertyAnimation,CAAnimationGroup,CATranstion分别用于处理三种不同类型的动画.CAPropertyAnimation可以处理视图属性改变的动画。CAAnimationGroup可以处理组合动画，CATranstion可以处理转场动画。CAPropertyAnimation分出两个子类，CABasicAnimation和CAKeyframeAnimation，这两个字累分别用来处理基础类动画和关键帧动画。基础动画的一个子类CASpringAnimation处理阻尼动画。</p>
<p>&ensp;&ensp;CAAnimation中定义了两个主要属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CAMediaTimingFunction *timingFunction; //动画执行时序方式</span><br><span class="line">BOOL removedOnCompletion; //动画完成时是否移除对象</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp; timingFunction中的动画效果是线性执行，淡入，淡出等，点击查看源码可以查看有哪些效果。</p>
<p>&ensp;&ensp; CAPropertyAnimation定义如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@interface CAPropertyAnimation : CAAnimation</span><br><span class="line">///初始化方法</span><br><span class="line">+ (instancetype)animationWithKeyPath:(nullable NSString *)path;</span><br><span class="line">/// 需要执行动画的属性名称，比如背景色渐变动画path可以设置为backgroundColor</span><br><span class="line">@property(nullable, copy) NSString *keyPath;</span><br><span class="line">/// 动画的执行状态是否叠加到视图的原状态上 if true， 第二次动画执行从第一次终点开始</span><br><span class="line">@property(getter=isAdditive) BOOL additive;</span><br><span class="line">/// 动画是否重复执行</span><br><span class="line">@property(getter=isCumulative) BOOL cumulative;</span><br><span class="line">/// 这个属性和transform动画执行相关</span><br><span class="line">@property(nullable, strong) CAValueFunction *valueFunction;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>

<h5 id="CABasicAnimation创建基础动画"><a href="#CABasicAnimation创建基础动画" class="headerlink" title="CABasicAnimation创建基础动画"></a>CABasicAnimation创建基础动画</h5><p>&ensp;&ensp;CABasicAnimation是动画框架中最常用的动画执行类，使用CABasic创建一个渐变色动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    /// gradient</span><br><span class="line">    CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@&quot;backgroundColor&quot;];</span><br><span class="line">    anim.fromValue = (id)[UIColor redColor].CGColor;</span><br><span class="line">    anim.toValue = (id)[UIColor blueColor].CGColor;</span><br><span class="line">    anim.duration = 2;</span><br><span class="line">    [_layer addAnimation:anim forKey:@&quot;&quot;];</span><br><span class="line">    /// rotate</span><br><span class="line">    CABasicAnimation *anima2 = [CABasicAnimation animationWithKeyPath:@&quot;transform&quot;];</span><br><span class="line">    anima2.fromValue = @0;</span><br><span class="line">    anima2.toValue = @200;</span><br><span class="line">    anima2.duration = 2;</span><br><span class="line">    anima2.valueFunction =[CAValueFunction functionWithName:kCAValueFunctionTranslateX];</span><br><span class="line">    [_layer addAnimation:anima2 forKey:@&quot;2&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="CAKeyFrameAnimation创建关键帧动画"><a href="#CAKeyFrameAnimation创建关键帧动画" class="headerlink" title="CAKeyFrameAnimation创建关键帧动画"></a>CAKeyFrameAnimation创建关键帧动画</h5><p>&ensp;&ensp;通过关键帧创建的动画可以通过设置关键帧的方式自由控制整个动画的过程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    _layer = [CALayer layer];</span><br><span class="line">    _layer.bounds = CGRectMake(0, 0, 100, 100);</span><br><span class="line">    _layer.position = CGPointMake(160, 200);</span><br><span class="line">    _layer.backgroundColor = [UIColor redColor].CGColor;</span><br><span class="line">    [self.view.layer addSublayer:_layer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    CAKeyframeAnimation *ani = [CAKeyframeAnimation animationWithKeyPath:@&quot;position&quot;];</span><br><span class="line">    ani.values = @[[NSValue valueWithCGPoint:CGPointMake(100, 200)],[NSValue valueWithCGPoint:CGPointMake(120, 300)],[NSValue valueWithCGPoint:CGPointMake(140, 400)],[NSValue valueWithCGPoint:CGPointMake(160, 800)]];</span><br><span class="line">    ///设置每段动画的时间占比，第一个位置到第二个位置占比0.5,第二个位置到第三个位置占比0.3</span><br><span class="line">    ani.keyTimes = @[@0,@0.5,@0.8,@1];</span><br><span class="line">    ani.duration = 3;</span><br><span class="line">    [_layer addAnimation:ani forKey:@&quot;&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;运行之后可以看到视图在三秒内进行了位置偏移，切速度逐渐变快</p>
<h5 id="CATranstion–layer层的转场动画"><a href="#CATranstion–layer层的转场动画" class="headerlink" title="CATranstion–layer层的转场动画"></a>CATranstion–layer层的转场动画</h5><p>&ensp;&ensp;CATransition动画用来处理CAlayer层的转场效果，可以在CALayer对象出现时展示动画效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    CALayer *layer = [CALayer layer];</span><br><span class="line">    layer.bounds = CGRectMake(0, 0, 100, 100);</span><br><span class="line">    layer.position = CGPointMake(100, 300);</span><br><span class="line">    layer.backgroundColor = [UIColor redColor].CGColor;</span><br><span class="line">    CATransition *ani = [CATransition animation];</span><br><span class="line">    ani.type = kCATransitionPush;</span><br><span class="line">    ani.subtype = kCATransitionFromRight;</span><br><span class="line">    ani.duration = 3;</span><br><span class="line">    [layer addAnimation:ani forKey:@&quot;&quot;];</span><br><span class="line">    [self.view.layer addSublayer:layer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp; 其中的type用来设置转场动画的类型，subType设置动画执行的方向。</p>
<h5 id="layer层组合动画–CAAnimationGroup"><a href="#layer层组合动画–CAAnimationGroup" class="headerlink" title="layer层组合动画–CAAnimationGroup"></a>layer层组合动画–CAAnimationGroup</h5><p>&ensp;&ensp;CAAnimationGroup类没有定义特定的动画类型，可以理解为是一个动画容器，在其中加入组合后的动画效果，进行展示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    CABasicAnimation *ani1 = [CABasicAnimation animationWithKeyPath:@&quot;backgroundColor&quot;];</span><br><span class="line">    ani1.toValue = (id)[UIColor blueColor].CGColor;</span><br><span class="line">    CABasicAnimation *ani2 = [CABasicAnimation animationWithKeyPath:@&quot;position&quot;];</span><br><span class="line">    ani2.toValue = [NSValue valueWithCGPoint:CGPointMake(200, 400)];</span><br><span class="line">    CAAnimationGroup *group = [CAAnimationGroup animation];</span><br><span class="line">    CABasicAnimation *ani3 = [CABasicAnimation animationWithKeyPath:@&quot;transform&quot;];</span><br><span class="line">    ani3.fromValue = @0;</span><br><span class="line">    ani3.toValue = @M_PI;</span><br><span class="line">    ani3.valueFunction =[CAValueFunction functionWithName:kCAValueFunctionRotateZ];</span><br><span class="line">    ani3.beginTime = 2;</span><br><span class="line">    group.duration = 3;</span><br><span class="line">    group.animations = @[ani1,ani2,ani3];</span><br><span class="line">    [_layer addAnimation:group forKey:@&quot;&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;上述代码给layer增加了三层动画，同时设置了旋转动画从第2秒才开始执行。</p>
<h5 id="CATransform3D动画"><a href="#CATransform3D动画" class="headerlink" title="CATransform3D动画"></a>CATransform3D动画</h5><p>&ensp;&ensp;任何CALayer对象都有transform属性，这个属性用来设置CALayer对象数学变换的效果。可以实现平移，旋转，放缩等动画效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    UIView *view = [UIView new];</span><br><span class="line">    view.frame = CGRectMake(100, 200, 100, 100);</span><br><span class="line">    view.backgroundColor = [UIColor redColor];</span><br><span class="line">    UIView *view2 = [[UIView alloc]initWithFrame:CGRectMake(100, 200, 100, 100)];</span><br><span class="line">    view2.backgroundColor = [UIColor blueColor];</span><br><span class="line">    /// x平移100 y平移100，z平移0</span><br><span class="line">    CATransform3D trans = CATransform3DTranslate(view2.layer.transform, 100, 100, 0);</span><br><span class="line">    /// x方向缩小0.5，y方向放大2</span><br><span class="line">    CATransform3D trans2 = CATransform3DScale(trans, 0.5, 2, 0);</span><br><span class="line">    ///旋转变换沿着z轴旋转45度</span><br><span class="line">    CATransform3D trans3 = CATransform3DRotate(trans2, M_PI_4, 0, 0, 1);</span><br><span class="line">    view2.layer.transform = trans3;</span><br><span class="line">    /// 用于将要变换的效果进行翻转</span><br><span class="line">    view.layer.transform = CATransform3DInvert(trans2);</span><br><span class="line">    [self.view addSubview:view];</span><br><span class="line">    [self.view addSubview:view2];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;上面代码在同样位置创建了两个view，然后使用平移变换将其中一个进行了移动。trans2给图像增加了放缩变换，trans3给图像增加了z轴的旋转变换，CATransform3DInvert给将要增加的效果进行翻转。<br>&ensp;&ensp;效果如下<br><img src="/2021/09/12/iOS动画基础/CATransform3D.png" alt="CATransform3D"></p>
<h4 id="粒子动画效果"><a href="#粒子动画效果" class="headerlink" title="粒子动画效果"></a>粒子动画效果</h4><p>&ensp;&ensp;宏观上有序的，轨迹确定的规则动画可以从过layer层和UIViewAnimation实现，对于微观的，无序的，轨迹无法预测的随机动画，可以使用CAEmitterLayer实现。CAEmitterLayer可以实现效果炫酷的粒子动画，粒子效果分为两部分，一部分是粒子发射器，用于配制粒子的整体效果，另一部分是粒子单元，用于配制粒子的具体属性。CAEmitterLayer继承子CALayer。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor blackColor];</span><br><span class="line">    _emitterLayer = [[CAEmitterLayer alloc] init];</span><br><span class="line">    /// 粒子发射器在xy平面的位置</span><br><span class="line">    _emitterLayer.emitterPosition = CGPointMake(self.view.frame.size.width/2, self.view.frame.size.height - 20);</span><br><span class="line">    /// 粒子发射器的大小</span><br><span class="line">    _emitterLayer.emitterSize = CGSizeMake(self.view.frame.size.width-100, 20);</span><br><span class="line">    _emitterLayer.renderMode = kCAEmitterLayerAdditive;</span><br><span class="line">    </span><br><span class="line">    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)];</span><br><span class="line">    view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    view.layer.cornerRadius = 5;</span><br><span class="line">    [self.view addSubview:view];</span><br><span class="line">    UIImage *img = [self imageFromView:view];</span><br><span class="line">    /// 火焰发射单元</span><br><span class="line">    /// 粒子单元</span><br><span class="line">    CAEmitterCell *fire = [CAEmitterCell emitterCell];</span><br><span class="line">    /// 粒子的创建速率 默认1/s</span><br><span class="line">    fire.birthRate = 800;</span><br><span class="line">    /// 粒子存活时间，默认1s</span><br><span class="line">    fire.lifetime = 3.0;</span><br><span class="line">    /// 粒子的生存时间容差</span><br><span class="line">    fire.lifetimeRange = 1.5;</span><br><span class="line">    fire.color = [UIColor colorWithRed:0.8 green:0.4 blue:0.2 alpha:0.1].CGColor;</span><br><span class="line">    fire.name = @&quot;fire&quot;;</span><br><span class="line">    fire.contents = (id)img.CGImage;</span><br><span class="line">    /// 粒子速率</span><br><span class="line">    fire.velocity = 160;</span><br><span class="line">    /// 粒子速率容差</span><br><span class="line">    fire.velocityRange = 80;</span><br><span class="line">    /// 粒子在xy平面的发射角度</span><br><span class="line">    fire.emissionLongitude = M_PI + M_PI_2;</span><br><span class="line">    /// 粒子发射角度容差</span><br><span class="line">    fire.emissionRange = M_PI_2;</span><br><span class="line">    /// 粒子缩放速度</span><br><span class="line">    fire.scaleSpeed = 0.3;</span><br><span class="line">    /// 粒子旋转度</span><br><span class="line">    fire.spin = 0.2;</span><br><span class="line">    /// 烟雾</span><br><span class="line">    CAEmitterCell *smoke = [CAEmitterCell emitterCell];</span><br><span class="line">    smoke.birthRate = 800;</span><br><span class="line">    smoke.lifetime = 6.0;</span><br><span class="line">    smoke.lifetimeRange = 1.5;</span><br><span class="line">    smoke.color = [UIColor colorWithRed:1 green:1 blue:1 alpha:0.05].CGColor;</span><br><span class="line">    smoke.name = @&quot;smoke&quot;;</span><br><span class="line">    smoke.contents = (id)img.CGImage;</span><br><span class="line">    smoke.velocity = 250;</span><br><span class="line">    smoke.velocityRange = 100;</span><br><span class="line">    smoke.emissionLongitude = M_PI+M_PI_2;</span><br><span class="line">    smoke.emissionRange = M_PI_2;</span><br><span class="line">    _emitterLayer.emitterCells = [NSArray arrayWithObjects:smoke,fire, nil];</span><br><span class="line">    [self.view.layer addSublayer:_emitterLayer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (UIImage *)imageFromView:(UIView *)view &#123;</span><br><span class="line">    CGSize size = view.frame.size;</span><br><span class="line">    UIGraphicsBeginImageContext(size);</span><br><span class="line">    [view.layer renderInContext:UIGraphicsGetCurrentContext()];</span><br><span class="line">    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line">    return image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;上述注释中解释了CAEmitterLayer和CAEmitterCell的部分属性，可以点击相关源码查看详细的定义。 最终的效果如下所示：</p>
<p><img src="/2021/09/12/iOS动画基础/fire.png" alt="fire"></p>
<h4 id="播放动态gif图"><a href="#播放动态gif图" class="headerlink" title="播放动态gif图"></a>播放动态gif图</h4><p>&ensp;&ensp;由于许多应用在进行某些需求的动画处理时会使用播放GIF图的方式，因此把这一技术也归纳为iOS动画开发技术。一般有两种方式进行GIF图的播放，一种是将其渲染为UIWebView进行播放，一种是将GIF文件中存储的图片数据与图片信息获取出来，使用UIImageView的帧动画进行播放。</p>
<h5 id="使用UIWebView进行GIF图动态播放"><a href="#使用UIWebView进行GIF图动态播放" class="headerlink" title="使用UIWebView进行GIF图动态播放"></a>使用UIWebView进行GIF图动态播放</h5><p>&ensp;&ensp;GIF图渲染为UIWebView进行渲染具有简单，效能强的特点，缺点是加载GIF图需要一定的时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    self.view.backgroundColor = [UIColor whiteColor];</span><br><span class="line">    ///UIWebView已经废弃，使用WKWebView</span><br><span class="line">    WKWebView *webView = [[WKWebView alloc] initWithFrame:CGRectMake(100, 200, 280, 300)];</span><br><span class="line">    /// 注意gif资源不能放在Assests目录下</span><br><span class="line">    NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@&quot;mygif&quot; ofType:@&quot;gif&quot;]];</span><br><span class="line">    [webView loadData:data MIMEType:@&quot;image/gif&quot; characterEncodingName:@&quot;UTF-8&quot; baseURL:[NSURL fileURLWithPath:NSTemporaryDirectory()]];</span><br><span class="line">    [self.view addSubview:webView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="使用UIImageView帧动画播放gif图"><a href="#使用UIImageView帧动画播放gif图" class="headerlink" title="使用UIImageView帧动画播放gif图"></a>使用UIImageView帧动画播放gif图</h5><p>&ensp;&ensp; gif图是一组包含图片及其信息数据的文件，其中记录着各张图片播放时长等信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/// 使用uiimageView播放gif图</span><br><span class="line">   UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(100, 500, 280, 300)];</span><br><span class="line">   [self.view addSubview:imgView];</span><br><span class="line">   NSString *dataPath = [[NSBundle mainBundle] pathForResource:@&quot;mygif&quot; ofType:@&quot;gif&quot;];</span><br><span class="line">   CGImageSourceRef source = CGImageSourceCreateWithURL((CFURLRef)[NSURL fileURLWithPath:dataPath], NULL);</span><br><span class="line">   size_t count = CGImageSourceGetCount(source);</span><br><span class="line">   CGFloat allTime = 0;</span><br><span class="line">   NSMutableArray *imageArray = [[NSMutableArray alloc] init];</span><br><span class="line">   NSMutableArray *timeArray = [[NSMutableArray alloc] init];</span><br><span class="line">   NSMutableArray *heightArray = @[].mutableCopy;</span><br><span class="line">   NSMutableArray *widthArray = @[].mutableCopy;</span><br><span class="line">   for (size_t i = 0; i&lt;count; i++) &#123;</span><br><span class="line">       CGImageRef image = CGImageSourceCreateImageAtIndex(source, i, NULL);</span><br><span class="line">       [imageArray addObject:(__bridge UIImage *)image];</span><br><span class="line">       CGImageRelease(image);</span><br><span class="line">       /// 图片信息</span><br><span class="line">       NSDictionary *info = (__bridge NSDictionary *)CGImageSourceCopyPropertiesAtIndex(source, i, NULL);</span><br><span class="line">       CGFloat width = [[info objectForKey:(__bridge NSString *)kCGImagePropertyPixelWidth] floatValue];</span><br><span class="line">       CGFloat height = [[info objectForKey:(__bridge NSString *)kCGImagePropertyPixelHeight] floatValue];</span><br><span class="line">       [widthArray addObject:[NSNumber numberWithFloat:width]];</span><br><span class="line">       [heightArray addObject:[NSNumber numberWithFloat:height]];</span><br><span class="line">       NSDictionary *timeDic = [info objectForKey:(__bridge NSDictionary *)kCGImagePropertyGIFDictionary];</span><br><span class="line">       CGFloat time = [[timeDic objectForKey:(__bridge NSString *)kCGImagePropertyGIFDelayTime] floatValue];</span><br><span class="line">       allTime +=time;</span><br><span class="line">       [timeArray addObject:[NSNumber numberWithFloat:time]];</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@&quot;contents&quot;];</span><br><span class="line">   NSMutableArray *times = @[].mutableCopy;</span><br><span class="line">   CGFloat currentTime = 0;</span><br><span class="line">   for (int i=0; i&lt;imageArray.count; i++) &#123;</span><br><span class="line">       [times addObject:[NSNumber numberWithFloat:currentTime/allTime]];</span><br><span class="line">       currentTime += [timeArray[i] floatValue];</span><br><span class="line">   &#125;</span><br><span class="line">   [animation setKeyTimes:times];</span><br><span class="line">   [animation setValues:imageArray];</span><br><span class="line">   [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]];</span><br><span class="line">   animation.repeatCount = MAXFLOAT;</span><br><span class="line">   animation.duration = allTime;</span><br><span class="line">   [imgView.layer addAnimation:animation forKey:@&quot;gifAnimation&quot;];</span><br></pre></td></tr></table></figure>

<p>&ensp;&ensp;最后效果和前面的WkWebView相同，展示了一个gif图。不过代码比较繁琐。从中也可以看出，如果要对gif图中的某一部分进行操作也是可以通过这种方式实现的。</p>
<p><strong>以上代码demo请参考<a href="https://github.com/SJ110/ios-animation-demo" target="_blank" rel="noopener">这里</a></strong></p>
<h4 id="小游戏Flappy-Bird设计"><a href="#小游戏Flappy-Bird设计" class="headerlink" title="小游戏Flappy Bird设计"></a>小游戏Flappy Bird设计</h4><p>&ensp;&ensp; flppy bird小游戏是对ios动画的一个小应用，也是参考书中的一个小demo，其中小鸟的动作通过动画实现。需要抓住的点是背景的移动是通过定时器实现的，在1/60秒内，屏幕上的背景会向左移动一个像素，从而实现了背景的移动。给小鸟所在的屏幕增加一个点击事件，每次点击小鸟的坐标都可以变化一定的像素。通过随机数设置障碍物的位置。下面是两张截图: 源码请参考<a href="https://github.com/SJ110/flappy-bird" target="_blank" rel="noopener">这里</a></p>
<p><img src="/2021/09/12/iOS动画基础/flappybird1.png" alt="flappybird1"></p>
<p><img src="/2021/09/12/iOS动画基础/flappybird2.png" alt="flappybird2"></p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/09/05/iOSruntime之method-exchange/" rel="next" title="iOSruntime之method_exchange">
                <i class="fa fa-chevron-left"></i> iOSruntime之method_exchange
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/10/08/iOS多线程/" rel="prev" title="iOS多线程">
                iOS多线程 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Xiaopingpp">
            
              <p class="site-author-name" itemprop="name">Xiaopingpp</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">45</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/SJ110" title="GitHub &rarr; https://github.com/SJ110" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:songjunp@qq.com" title="E-Mail &rarr; mailto:songjunp@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://leetcode-cn.com/u/songjunp/" title="leetcode &rarr; https://leetcode-cn.com/u/songjunp/" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>leetcode</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用UIImageView播放图片组动画"><span class="nav-number">1.1.</span> <span class="nav-text">使用UIImageView播放图片组动画</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIView层动画的应用"><span class="nav-number">1.2.</span> <span class="nav-text">UIView层动画的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#UIView层过渡动画支持的属性"><span class="nav-number">1.2.1.</span> <span class="nav-text">UIView层过渡动画支持的属性</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用commit方式进行UIView动画创建"><span class="nav-number">1.3.</span> <span class="nav-text">使用commit方式进行UIView动画创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIView转场动画"><span class="nav-number">1.4.</span> <span class="nav-text">UIView转场动画</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#coreAnimation动画编程技术"><span class="nav-number">1.5.</span> <span class="nav-text">coreAnimation动画编程技术</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#色彩梯度层–CAGradientLayer"><span class="nav-number">1.5.1.</span> <span class="nav-text">色彩梯度层–CAGradientLayer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#视图拷贝层–CARelicatorLayer"><span class="nav-number">1.5.2.</span> <span class="nav-text">视图拷贝层–CARelicatorLayer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#徒刑渲染层–CAShapeLayer"><span class="nav-number">1.5.3.</span> <span class="nav-text">徒刑渲染层–CAShapeLayer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#文本绘制层–CATextLayer"><span class="nav-number">1.5.4.</span> <span class="nav-text">文本绘制层–CATextLayer</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CAAnimation动画体系介绍"><span class="nav-number">1.6.</span> <span class="nav-text">CAAnimation动画体系介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#CABasicAnimation创建基础动画"><span class="nav-number">1.6.1.</span> <span class="nav-text">CABasicAnimation创建基础动画</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CAKeyFrameAnimation创建关键帧动画"><span class="nav-number">1.6.2.</span> <span class="nav-text">CAKeyFrameAnimation创建关键帧动画</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CATranstion–layer层的转场动画"><span class="nav-number">1.6.3.</span> <span class="nav-text">CATranstion–layer层的转场动画</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#layer层组合动画–CAAnimationGroup"><span class="nav-number">1.6.4.</span> <span class="nav-text">layer层组合动画–CAAnimationGroup</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CATransform3D动画"><span class="nav-number">1.6.5.</span> <span class="nav-text">CATransform3D动画</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#粒子动画效果"><span class="nav-number">1.7.</span> <span class="nav-text">粒子动画效果</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#播放动态gif图"><span class="nav-number">1.8.</span> <span class="nav-text">播放动态gif图</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用UIWebView进行GIF图动态播放"><span class="nav-number">1.8.1.</span> <span class="nav-text">使用UIWebView进行GIF图动态播放</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用UIImageView帧动画播放gif图"><span class="nav-number">1.8.2.</span> <span class="nav-text">使用UIImageView帧动画播放gif图</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#小游戏Flappy-Bird设计"><span class="nav-number">1.9.</span> <span class="nav-text">小游戏Flappy Bird设计</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xiaopingpp</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">182k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">2:46</span>
  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
<!-- ҳ����С���� -->
<script type="text/javascript" src="/js/clicklove.js"></script>